!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.page=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a,b){if("function"==typeof a)return c("*",a);if("function"==typeof b)for(var d=new f(a),e=1;e<arguments.length;++e)c.callbacks.push(d.middleware(arguments[e]));else"string"==typeof a?"string"==typeof b?c.redirect(a,b):c.show(a,b):c.start(a)}function d(a){if(!a.handled){var b=m.pathname+m.search;b!==a.canonicalPath&&(c.stop(),a.handled=!1,m.href=a.canonicalPath)}}function e(a,b){"/"===a[0]&&0!==a.indexOf(o)&&(a=o+a);var c=a.indexOf("?");if(this.canonicalPath=a,this.path=a.replace(o,"")||"/",this.title=document.title,this.state=b||{},this.state.path=a,this.querystring=~c?a.slice(c+1):"",this.pathname=~c?a.slice(0,c):a,this.params=[],this.hash="",~this.path.indexOf("#")){var d=this.path.split("#");this.path=d[0],this.hash=d[1]||"",this.querystring=this.querystring.split("#")[0]}}function f(a,b){b=b||{},this.path="*"===a?"(.*)":a,this.method="GET",this.regexp=k(this.path,this.keys=[],b.sensitive,b.strict)}function g(a){if(a.state){var b=a.state.path;c.replace(b,a.state)}}function h(a){if(1==i(a)&&!(a.metaKey||a.ctrlKey||a.shiftKey||a.defaultPrevented)){for(var b=a.target;b&&"A"!=b.nodeName;)b=b.parentNode;if(b&&"A"==b.nodeName){var d=b.getAttribute("href");if(!(b.pathname===m.pathname&&(b.hash||"#"===d)||d&&d.indexOf("mailto:")>-1||b.target||!j(b.href))){var e=b.pathname+b.search+(b.hash||""),f=e+b.hash;e=e.replace(o,""),o&&f===e||(a.preventDefault(),c.show(f))}}}}function i(a){return a=a||window.event,null===a.which?a.button:a.which}function j(a){var b=m.protocol+"//"+m.hostname;return m.port&&(b+=":"+m.port),a&&0===a.indexOf(b)}var k=a("path-to-regexp");b.exports=c;var l,m=window.history.location||window.location,n=!0,o="",p=!1;c.callbacks=[],c.base=function(a){return 0===arguments.length?o:void(o=a)},c.start=function(a){if(a=a||{},!l&&(l=!0,!1===a.dispatch&&(n=!1),!1!==a.popstate&&window.addEventListener("popstate",g,!1),!1!==a.click&&window.addEventListener("click",h,!1),!0===a.hashbang&&(p=!0),n)){var b=p&&0===m.hash.indexOf("#!")?m.hash.substr(2)+m.search:m.pathname+m.search+m.hash;c.replace(b,null,!0,n)}},c.stop=function(){l=!1,removeEventListener("click",h,!1),removeEventListener("popstate",g,!1)},c.show=function(a,b,d){var f=new e(a,b);return!1!==f.handled&&f.pushState(),!1!==d&&c.dispatch(f),f},c.redirect=function(a,b){c(a,function(){setTimeout(function(){c.replace(b)})})},c.replace=function(a,b,d,f){var g=new e(a,b);return g.init=d,g.save(),!1!==f&&c.dispatch(g),g},c.dispatch=function(a){function b(){var f=c.callbacks[e++];return f?void f(a,b):d(a)}var e=0;b()},c.Context=e,e.prototype.pushState=function(){history.pushState(this.state,this.title,p&&"/"!==this.canonicalPath?"#!"+this.canonicalPath:this.canonicalPath)},e.prototype.save=function(){history.replaceState(this.state,this.title,p&&"/"!==this.canonicalPath?"#!"+this.canonicalPath:this.canonicalPath)},c.Route=f,f.prototype.middleware=function(a){var b=this;return function(c,d){return b.match(c.path,c.params)?a(c,d):void d()}},f.prototype.match=function(a,b){var c=this.keys,d=a.indexOf("?"),e=~d?a.slice(0,d):a,f=this.regexp.exec(decodeURIComponent(e));if(!f)return!1;for(var g=1,h=f.length;h>g;++g){var i=c[g-1],j="string"==typeof f[g]?decodeURIComponent(f[g]):f[g];i?b[i.name]=void 0!==b[i.name]?b[i.name]:j:b.push(j)}return!0},c.sameOrigin=j},{"path-to-regexp":2}],2:[function(a,b){function c(a){return a.replace(/([=!:$\/()])/g,"\\$1")}function d(a,b,g){b&&!Array.isArray(b)&&(g=b,b=null),b=b||[],g=g||{};var h=g.strict,i=g.end!==!1,j=g.sensitive?"":"i",k=0;if(a instanceof RegExp){var l=a.source.match(/\((?!\?)/g)||[];return b.push.apply(b,l.map(function(a,b){return{name:b,delimiter:null,optional:!1,repeat:!1}})),f(a,b)}if(Array.isArray(a))return a=a.map(function(a){return d(a,b,g).source}),f(new RegExp("(?:"+a.join("|")+")",j),b);a=a.replace(e,function(a,d,e,f,g,h,i,j){if(d)return d;if(j)return"\\"+j;var l="+"===i||"*"===i,m="?"===i||"*"===i;return b.push({name:f||k++,delimiter:e||"/",optional:m,repeat:l}),e=e?"\\"+e:"",g=c(g||h||"[^"+(e||"\\/")+"]+?"),l&&(g=g+"(?:"+e+g+")*"),m?"(?:"+e+"("+g+"))?":e+"("+g+")"});var m="/"===a[a.length-1];return h||(a=(m?a.slice(0,-2):a)+"(?:\\/(?=$))?"),i||(a+=h&&m?"":"(?=\\/|$)"),f(new RegExp("^"+a+(i?"$":""),j),b)}b.exports=d;var e=new RegExp(["(\\\\.)","([\\/.])?(?:\\:(\\w+)(?:\\(((?:\\\\.|[^)])*)\\))?|\\(((?:\\\\.|[^)])*)\\))([+*?])?","([.+*?=^!:${}()[\\]|\\/])"].join("|"),"g"),f=function(a,b){return a.keys=b,a}},{}]},{},[1])(1)}),function(a){"use strict";function b(a){return"undefined"==typeof a}var c={cache:{},quotes:[],title:"Shannonisms","yield":a.querySelectorAll("#js-yield")[0]},d=function(){g("quotes",function(a){c.quotes=a.quotes,page("/",e.index),page("/submit",e.submit),page("/disclaimer",e.disclaimer),page("/quotes",e.quotes.index),page("/quote/:id",e.quotes.entry),page("*",e.notFound),page({hashbang:!0})})},e={index:function(){c["yield"].innerHTML=f()},submit:function(){console.log("submit")},disclaimer:function(){console.log("disclaimer")},notFound:function(){console.log("404")},quotes:{index:function(){console.log("quote index")},entry:function(a){c["yield"].innerHTML=f(a.params.id)}}},f=function(a){return c.quoteId=b(a)?Math.floor(Math.random()*c.quotes.length):parseInt(a)-1,c.quotes[c.quoteId]},g=function(a,d){var e=-1!==a.indexOf("partials")?"html":"json",f=a.replace("/","").replace(".","");if(b(c.cache[f])){a=a+"."+e;var g=new XMLHttpRequest;g.open("GET",a,!0),g.onload=function(){if(!(g.status>=200&&g.status<400))throw"Server error!";var a="json"===e?JSON.parse(g.responseText):g.responseText;c.cache[f]=a,d(a)},g.onerror=function(){throw"Connection error!"},g.send()}else d(c.cache[f])};return{router:d}}(document,window).router();